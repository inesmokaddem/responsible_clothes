<% content_for :meta_title, "#{@product.name} is on #{DEFAULT_META["meta_product_name"]}" %>
<% content_for :meta_description, @product.description %>
<% content_for :meta_image, cl_image_path(@product.photo) %>

<div class="show_product">
  <div class="product_picture" style="background-image: url('<%= cl_image_path @product.photo if @product.photo.present? %>');" >
    <div class="header-product">
      <div class="flex-item">
        <%= link_to '', :back, class:"fas fa-angle-left back_arrow" %>
      </div>
      <div class="flex-item">
        <div id="favorite-action">
          <% if current_user.has_favorited?(@product) %>
            <%= render "favorites/added" %>
          <% else %>
            <%= link_to product_favorites_path(@product), class: "btn-circle", method: :post, remote: true do %>
              <%= inline_svg "heart.svg", width: 39 %>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <div class="description_product">
    <div class="d-flex align-items-center">
      <div class="col-6 p-0">
        <h2 class="text-uppercase"><%= @product.name %></h2>
      </div>
      <div class="col-6 p-0 text-right">
        <h3><%= @product.price %> €</h3>
      </div>
    </div>
    <h3><%= @product.brand.name %></h3>
    <p><%= @product.description %></p>
    <h3>Global rating of this product : <%= @product.product_score.round(1) %> / 10</h3>
    <p>
      <%= social_share_button_tag(@product, :href => product_path(@product), desc: @product.name, :allow_sites => %w(twitter facebook pinterest)) %>
    </p>
  </div>
  <div class="rating">
    <h3>Ecological product impact</h3>
    <div class="accordion" id="accordionFirst">

      <div class="water_footprint">
        <div class="collapse-header" data-toggle="collapse" data-target="#collapseOne">
          <div class="d-flex align-items-center">
            <div class="icons">
              <%= inline_svg("water_icon.svg", width: 32, class: "collapse-icon") %>
            </div>
            Water footprint
          </div>
          <div class="d-flex align-items-center">
            <%= @product.water_footprint %> ℓ
            <div class="mx-2 circle circle-<%= @product.water_color %>"></div>
            <div class="arrow_down">
              <%= inline_svg "arrow-down.svg", width: 16, height: 8 %>
            </div>
          </div>
        </div>

        <div id="collapseOne" class="collapse">
          <div class="collapse-body">
            <p>It took more than <%= @product.water_footprint %>ℓ of water to make this product</p>
          </div>
        </div>
      </div>

      <div class="carbon_footprint">
        <div class="collapse-header" data-toggle="collapse" data-target="#collapseTwo">
          <div class="d-flex align-items-center">
            <div class="icons">
              <%= inline_svg("plane.svg", width: 32, class: "collapse-icon") %>
            </div>
            Carbon footprint
          </div>
          <div class="d-flex align-items-center">
            <%= @product.carbon_footprint %> Km
            <div class="mx-2 circle circle-<%= @product.carbon_color %>"></div>
            <div class="arrow_down">
              <%= inline_svg "arrow-down.svg", width: 16, height: 8 %>
            </div>
          </div>
        </div>

        <div id="collapseTwo" class="collapse">
          <div class="collapse-body">
            <p>Your product has traveled more than <%= @product.carbon_footprint %>km</p>
            <p>Your product was made in <strong><%= @product.country.name %></strong></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-4 rating">
    <h3>Additional info about the brand</h3>
    <div class="accordion" id="accordionSecond">
      <div class="labour_conditions">
        <div class="collapse-header" data-toggle="collapse" data-target="#collapseThree">
          <div class="d-flex align-items-center">
            <div class="icons">
              <%= inline_svg("labour.svg", width: 32, class: "collapse-icon") %>
            </div>
            Labour conditions
          </div>
          <div class="d-flex align-items-center">
            <div class="mx-2 circle circle-<%= @product.brand.labor_color %>"></div>
            <div class="arrow_down">
              <%= inline_svg "arrow-down.svg", width: 16, height: 8 %>
            </div>
          </div>
        </div>

        <div id="collapseThree" class="collapse">
          <div class="collapse-body">
            <p><strong><%= @product.brand.name %> got <%= @product.brand.labor_answers %> YES about labor conditions.</strong></p>
            <h4>The Labor conditions rating is calculated from several information:</h4>
            <ul>
              <li>If they are members of the Ethical Trading Initiative, the Fair Wear Foundation, the Labor Association and the Sustainable Apparel Coalition</li>
              <li>If they are signatories to the Bangladesh Agreement on Fire Safety and Security of Buildings</li>
              <li>If they disclose various information to illustrate that they are taking steps to ensure that there is no forced labor or child labor in their supply chain. But also on the freedom of association of their workers and their working conditions.</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="transparency">
        <div class="collapse-header" data-toggle="collapse" data-target="#collapseFour">
          <div class="d-flex align-items-center">
            <div class="icons">
              <%= inline_svg("transparency.svg", width: 32, class: "collapse-icon") %>
            </div>
            Transparency
          </div>
          <div class="d-flex align-items-center">
            <div class="mx-2 circle circle-<%= @product.brand.transparency_color %>"></div>
            <div class="arrow_down">
              <%= inline_svg "arrow-down.svg", width: 16, height: 8 %>
            </div>
          </div>
        </div>

        <div id="collapseFour" class="collapse">
          <div class="collapse-body">
            <p><strong><%= @product.brand.name %> got <%= @product.brand.transparency_answers %> YES about transparency </strong></p>
            <div class="details_transparency">
              <h4>The brand transparency is calculated according to several parameters:</h4>
              <ul>
                <li>if they disclose the complete list of their suppliers</li>
                <li>If they take steps to control the wages paid to the staff of their factories</li>
                <li>If they mention child labor, forced labor, safety and working conditions on their website.</li>
                <li>If they publish their code of conduct for suppliers</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-4 equivalent_product">
    <h4 class="text-center">Better alternatives products</h4>
    <!-- Slider alternative products -->
    <div class="container">
      <div class="row">
        <div id="carousel" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <div class="d-none d-md-block">
                <div class="slide-box">
                  <img src="https://picsum.photos/285/200/?image=0&random" alt="First slide">
                  <img src="https://picsum.photos/285/200/?image=1&random" alt="First slide">
                  <img src="https://picsum.photos/285/200/?image=2&random" alt="First slide">
                  <img src="https://picsum.photos/285/200/?image=3&random" alt="First slide">
                </div>
              </div>
              <div class="d-sm-none">
                <div class="slide-box">
                  <img src="https://picsum.photos/130/90/?image=3&random" alt="First slide">
                  <img src="https://picsum.photos/130/90/?image=3&random" alt="First slide">
                  <img src="https://picsum.photos/130/90/?image=3&random" alt="First slide">
                </div>
              </div>
            </div>
            <div class="carousel-item">
              <div class="d-none d-md-block">
                <div class="slide-box">
                  <img src="https://picsum.photos/285/200/?image=4&random" alt="Second slide">
                  <img src="https://picsum.photos/285/200/?image=5&random" alt="Second slide">
                  <img src="https://picsum.photos/285/200/?image=6&random" alt="Second slide">
                  <img src="https://picsum.photos/285/200/?image=7&random" alt="Second slide">
                </div>
              </div>
              <div class="d-sm-none">
                <div class="slide-box">
                  <img src="https://picsum.photos/130/90/?image=3&random" alt="Second slide">
                  <img src="https://picsum.photos/130/90/?image=3&random" alt="Second slide">
                  <img src="https://picsum.photos/130/90/?image=3&random" alt="Second slide">
                </div>
              </div>
            </div>
          </div>
          <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
